"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[721],{1658:(z,B,u)=>{u.d(B,{d:()=>i});var C=u(4004);class i{static valueNotInArray(w){return v=>w.includes(v.value)?{valueInArray:{value:v.value}}:null}static valueInArray(w){return v=>w.includes(v.value)?null:{valueNotInOptions:{value:v.value}}}static optionalValueInArray(w){return v=>w.pipe((0,C.U)(g=>g.includes(v.value)),(0,C.U)(g=>g?null:{valueNotInOptions:{value:v.value}}))}static allOrNothing(w){return v=>{const g=w.some(T=>{var s;return null===(s=v.get(T))||void 0===s?void 0:s.value}),q=w.every(T=>{var s;return null===(s=v.get(T))||void 0===s?void 0:s.value});return w.forEach(T=>{let s=v.get(T);g&&!q?(null==s?void 0:s.value)||null==s||s.setErrors(Object.assign(Object.assign({},s.errors),{allOrNothing:g})):(null==s?void 0:s.errors)&&s.errors.allOrNothing&&(delete s.errors.allOrNothing,s.markAsUntouched(),s.updateValueAndValidity())}),g&&!q?{allOrNothing:g}:null}}static isInteger(){return w=>{const v=parseFloat(w.value);return!isNaN(v)&&isFinite(v)&&Number.isInteger(v)&&"number"==typeof v?null:{notInteger:{value:w.value}}}}static isNumeric(){return w=>!isNaN(parseFloat(w.value))&&isFinite(w.value)?null:{notNumeric:{value:w.value}}}static isWithinDates(w,v,g){return q=>g.date.valueOf()>w.date.valueOf()&&g.date.valueOf()<v.date.valueOf()?null:{dateNotAcceptable:{value:q.value}}}}},7721:(z,B,u)=>{u.r(B),u.d(B,{ReviewsModule:()=>ge});var C=u(9808),i=u(2382),a=u(7322),w=u(7531),v=u(5399),g=u(5350),q=u(1217),T=u(2236),s=u(1035),V=u(727),$=u(9300),o=u(2776),p=u(2027),n=u(1658),e=u(4893),P=u(18),G=u(921),ee=u(6489);function te(d,h){if(1&d&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._UZ(2,"app-shared-review-window-progress",14),e.qZA(),e.qZA()),2&d){const t=e.oxw();e.xp6(2),e.Q6J("reviewWindow",t.currentReviewWindow)("totalTalents",t.totalTalents)("reviewedTalents",t.reviewedTalents)}}function ie(d,h){1&d&&(e.TgZ(0,"span",17),e._uU(1,"Curent Cycle"),e.qZA())}function ne(d,h){if(1&d){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().$implicit,_=e.oxw(),f=e.MAs(28);return _.editReviewWindowInfo(f,m)}),e._UZ(1,"i",19),e._uU(2," Edit "),e.qZA()}}function oe(d,h){if(1&d&&(e.TgZ(0,"div",4),e.TgZ(1,"div",9),e.TgZ(2,"p"),e._uU(3),e.YNc(4,ie,2,0,"span",15),e.qZA(),e.qZA(),e.TgZ(5,"div",10),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",10),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",11),e.YNc(12,ne,3,0,"button",16),e.qZA(),e.qZA()),2&d){const t=h.$implicit;e.xp6(3),e.hij(" ",t.name||"None on file"," "),e.xp6(1),e.Q6J("ngIf",t.hasStarted&&!t.hasEnded),e.xp6(3),e.AsE("",t.start||"None on file"," - ",t.start.displayTime(),""),e.xp6(3),e.AsE("",t.end||"None on file"," - ",t.end.displayTime(),""),e.xp6(2),e.Q6J("ngIf",t.canBeEdited)}}function de(d,h){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function ae(d,h){1&d&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function re(d,h){if(1&d&&(e.TgZ(0,"alert",48),e._uU(1),e.qZA()),2&d){const t=e.oxw(3);e.Q6J("dismissible",!0),e.xp6(1),e.hij(" There was an error while trying to save the information: ",t.backendErrorMsg," ")}}function se(d,h){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",41),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",49),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",41),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",50),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMin.errors))}}function le(d,h){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",41),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",51),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",41),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",52),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMin.errors))}}function ue(d,h){if(1&d&&(e.TgZ(0,"div",33),e.TgZ(1,"form",34),e.YNc(2,re,2,2,"alert",35),e.TgZ(3,"div",36),e.TgZ(4,"div",37),e.TgZ(5,"mat-form-field",38),e.TgZ(6,"mat-label"),e._uU(7,"Review cycle name"),e.qZA(),e._UZ(8,"input",39),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",37),e.TgZ(12,"mat-label",40),e.TgZ(13,"small"),e._uU(14,"Cycle start date"),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",41),e.TgZ(16,"mat-label"),e._uU(17,"Month"),e.qZA(),e._UZ(18,"input",42),e.TgZ(19,"mat-error"),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",41),e.TgZ(22,"mat-label"),e._uU(23,"Day"),e.qZA(),e._UZ(24,"input",43),e.TgZ(25,"mat-error"),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",41),e.TgZ(28,"mat-label"),e._uU(29,"Year"),e.qZA(),e._UZ(30,"input",44),e.TgZ(31,"mat-error"),e._uU(32),e.qZA(),e.qZA(),e.YNc(33,se,13,6,"div",22),e.qZA(),e.TgZ(34,"div",37),e.TgZ(35,"mat-label",40),e.TgZ(36,"small"),e._uU(37,"Cycle end date"),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",41),e.TgZ(39,"mat-label"),e._uU(40,"Month"),e.qZA(),e._UZ(41,"input",45),e.TgZ(42,"mat-error"),e._uU(43),e.qZA(),e.qZA(),e.TgZ(44,"mat-form-field",41),e.TgZ(45,"mat-label"),e._uU(46,"Day"),e.qZA(),e._UZ(47,"input",46),e.TgZ(48,"mat-error"),e._uU(49),e.qZA(),e.qZA(),e.TgZ(50,"mat-form-field",41),e.TgZ(51,"mat-label"),e._uU(52,"Year"),e.qZA(),e._UZ(53,"input",47),e.TgZ(54,"mat-error"),e._uU(55),e.qZA(),e.qZA(),e.YNc(56,le,13,6,"div",22),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addEditReviewWindowForm),e.xp6(1),e.Q6J("ngIf",t.backendError),e.xp6(3),e.Udp("width",100,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).windowName.errors)),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput)}}function ve(d,h){if(1&d){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sendDeleteWindowModal()}),e._UZ(1,"i",54),e._uU(2," Delete "),e.qZA()}}function me(d,h){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add new cycle"),e.qZA())}function we(d,h){1&d&&(e.TgZ(0,"span"),e._uU(1,"Update cycle details"),e.qZA())}function pe(d,h){if(1&d){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"h4",21),e.TgZ(2,"span"),e.YNc(3,de,2,0,"span",22),e.YNc(4,ae,2,0,"span",22),e._uU(5," Review Cycle "),e.qZA(),e.qZA(),e.TgZ(6,"button",23),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return null==m.modalRef?null:m.modalRef.hide()}),e.TgZ(7,"span",24),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,ue,57,25,"div",25),e.TgZ(10,"div",26),e.TgZ(11,"div",27),e.YNc(12,ve,3,0,"button",28),e.TgZ(13,"button",29),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return null==m.modalRef?null:m.modalRef.hide()}),e._UZ(14,"i",30),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendReviewWindowModal()}),e._UZ(17,"i",32),e.YNc(18,me,2,0,"span",22),e.YNc(19,we,2,0,"span",22),e.qZA(),e.qZA(),e.qZA()}if(2&d){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",!t.addEditReviewExtraInfo.create),e.xp6(5),e.Q6J("ngIf",t.addEditReviewWindowForm),e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.delete),e.xp6(4),e.Q6J("disabled",(null==t.addEditReviewExtraInfo?null:t.addEditReviewExtraInfo.processingForm)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.invalid)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.pristine)),e.xp6(2),e.Q6J("ngIf",1==t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",1!=t.addEditReviewExtraInfo.create)}}let ce=(()=>{class d{constructor(t,r,m,_,f,I){this.modalService=t,this.router=r,this.fb=m,this.sessionStateService=_,this.store=f,this.actionDispatcher=I,this.totalTalents=0,this.reviewedTalents=0,this.allWindows=[],this.timeInput=!1,this.subscriptions=new V.w0,this.backendError=!1,this.backendErrorMsg="",this.addEditReviewExtraInfo={create:!0,delete:!1,processingForm:!1},this.reviewWindow$=f.pipe((0,s.Ys)("reviewWindowState")),this.store.dispatch((0,o.Dz)()),this.store.dispatch((0,o.Km)()),this.subscriptions.add(this.sessionStateService.onSessionDestroyed.subscribe(l=>{this.modalRef&&this.modalRef.hide()})),this.subscriptions.add(this.reviewWindow$.subscribe(l=>{var E,W,b;this.backendErrorMsg=null===(E=l.errorMessage)||void 0===E?void 0:E.error,this.totalTalents=l.talentsIgnoreReview?l.talentsIgnoreReview:0,this.reviewedTalents=l.reviewedTalents?l.reviewedTalents:0,this.currentReviewWindow!=l.currentWindowReview&&(this.currentReviewWindow=l.currentWindowReview?l.currentWindowReview:void 0,this.store.dispatch((0,o.v2)({windowRId:(null===(W=this.currentReviewWindow)||void 0===W?void 0:W.id)?null===(b=this.currentReviewWindow)||void 0===b?void 0:b.id:""})));let x=new p.p,y=new p.p;y.date.setMonth(y.date.getMonth()-1),l.allWindows.length&&(this.allWindows=[]);for(let Z of l.allWindows){if(null==Z._id)continue;let c={id:"",name:"",start:null,end:null,hasStarted:!1,hasEnded:!1,canBeEdited:!1};c.id=Z._id,c.name=Z.name,c.start=new p.p({ISODateString:Z.startDate}),c.end=new p.p({ISODateString:Z.endDate}),c.hasStarted=c.start.date.valueOf()<x.date.valueOf(),c.hasEnded=c.end.date.valueOf()<x.date.valueOf(),c.hasStarted?c.end.date.valueOf()>y.date.valueOf()&&(c.canBeEdited=!0):c.canBeEdited=!0,this.allWindows.push(c)}this.allWindows=this.allWindows.sort((Z,c)=>Z.start.date.valueOf()<c.end.date.valueOf()?1:-1)})),this.subscriptions.add(this.actionDispatcher.pipe((0,$.h)(l=>[o.UD.CREATE_REVIEW_WINDOW_SUCCESS,o.UD.CREATE_REVIEW_WINDOW_FAILURE,o.UD.EDIT_REVIEW_WINDOW_SUCCESS,o.UD.EDIT_REVIEW_WINDOW_FAILURE,o.UD.DELETE_REVIEW_WINDOW_SUCCESS,o.UD.DELETE_REVIEW_WINDOW_FAILURE].includes(l.type))).subscribe(l=>{var E;this.addEditReviewExtraInfo.processingForm=!1,this.backendError=!1,l.type.includes("success")&&(null===(E=this.modalRef)||void 0===E||E.hide(),l.type==o.UD.EDIT_REVIEW_WINDOW_SUCCESS&&this.store.dispatch((0,o.Dz)())),l.type.includes("failure")&&(this.backendError=!0)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addReviewWindowInfo(t){this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!0,this.addEditReviewExtraInfo.delete=!1,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowName:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]],wsDay:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],wsMonth:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],wsYear:["",[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]],weDay:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],weMonth:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],weYear:["",[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])))}editReviewWindowInfo(t,r){var m,_,f,I,l;this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!1,this.addEditReviewExtraInfo.delete=!r.hasStarted,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowId:[r.id,[]],windowName:[r.name,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]],wsDay:[String(r.start.day),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],wsMonth:[String(r.start.month),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],wsYear:[String(r.start.year),[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]],weDay:[String(r.end.day),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],weMonth:[String(r.end.month),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],weYear:[String(r.end.year),[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control(String(r.start.min),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control(String(r.start.hour),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control(String(r.end.min),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control(String(r.end.hour),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)]))),r.hasStarted&&(this.timeInput&&(null===(m=this.addEditReviewWindowForm.get("wsMin"))||void 0===m||m.disable(),null===(_=this.addEditReviewWindowForm.get("wsHour"))||void 0===_||_.disable()),null===(f=this.addEditReviewWindowForm.get("wsDay"))||void 0===f||f.disable(),null===(I=this.addEditReviewWindowForm.get("wsMonth"))||void 0===I||I.disable(),null===(l=this.addEditReviewWindowForm.get("wsYear"))||void 0===l||l.disable())}sendCreateReviewWindowModal(){var t,r,m,_,f,I,l,E,W,b,x,y,Z,c,U,k,M,D,O,N,Y,S;this.formWindow={name:"",start:new Date,end:new Date};let A={values:{year:"",month:"",day:""}},R={values:{year:"",month:"",day:""}};this.formWindow.name=null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowName"))||void 0===r?void 0:r.value,A.values.year=null===(_=null===(m=this.addEditReviewWindowForm)||void 0===m?void 0:m.get("wsYear"))||void 0===_?void 0:_.value,A.values.month=null===(I=null===(f=this.addEditReviewWindowForm)||void 0===f?void 0:f.get("wsMonth"))||void 0===I?void 0:I.value,A.values.day=null===(E=null===(l=this.addEditReviewWindowForm)||void 0===l?void 0:l.get("wsDay"))||void 0===E?void 0:E.value,this.timeInput&&(A.values.hour=null===(b=null===(W=this.addEditReviewWindowForm)||void 0===W?void 0:W.get("wsHour"))||void 0===b?void 0:b.value,A.values.min=null===(y=null===(x=this.addEditReviewWindowForm)||void 0===x?void 0:x.get("wsMin"))||void 0===y?void 0:y.value);let H=new p.p(A);this.formWindow.start=H.date,R.values.year=null===(c=null===(Z=this.addEditReviewWindowForm)||void 0===Z?void 0:Z.get("weYear"))||void 0===c?void 0:c.value,R.values.month=null===(k=null===(U=this.addEditReviewWindowForm)||void 0===U?void 0:U.get("weMonth"))||void 0===k?void 0:k.value,R.values.day=null===(D=null===(M=this.addEditReviewWindowForm)||void 0===M?void 0:M.get("weDay"))||void 0===D?void 0:D.value,R.values.hour="23",R.values.min="59",this.timeInput&&(R.values.hour=null===(N=null===(O=this.addEditReviewWindowForm)||void 0===O?void 0:O.get("weHour"))||void 0===N?void 0:N.value,R.values.min=null===(S=null===(Y=this.addEditReviewWindowForm)||void 0===Y?void 0:Y.get("weMin"))||void 0===S?void 0:S.value);let Q=new p.p(R);this.formWindow.end=Q.date,this.store.dispatch((0,o.GC)({newWindow:this.formWindow}))}sendEditReviewWindowModal(){var t,r,m,_,f,I,l,E,W,b,x,y,Z,c,U,k,M,D,O,N,Y,S,A,R,H,Q;this.formWindow={id:null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===r?void 0:r.value};let j=this.allWindows.filter(L=>{var K;return L.id==(null===(K=this.formWindow)||void 0===K?void 0:K.id)})[0],J={values:{year:"",month:"",day:""}},F={values:{year:"",month:"",day:""}};if((null===(_=null===(m=this.addEditReviewWindowForm)||void 0===m?void 0:m.get("windowName"))||void 0===_?void 0:_.value)!=j.name&&(this.formWindow.name=null===(I=null===(f=this.addEditReviewWindowForm)||void 0===f?void 0:f.get("windowName"))||void 0===I?void 0:I.value),!j.hasStarted){J.values.year=null===(E=null===(l=this.addEditReviewWindowForm)||void 0===l?void 0:l.get("wsYear"))||void 0===E?void 0:E.value,J.values.month=null===(b=null===(W=this.addEditReviewWindowForm)||void 0===W?void 0:W.get("wsMonth"))||void 0===b?void 0:b.value,J.values.day=null===(y=null===(x=this.addEditReviewWindowForm)||void 0===x?void 0:x.get("wsDay"))||void 0===y?void 0:y.value,this.timeInput&&(J.values.hour=null===(c=null===(Z=this.addEditReviewWindowForm)||void 0===Z?void 0:Z.get("wsHour"))||void 0===c?void 0:c.value,J.values.min=null===(k=null===(U=this.addEditReviewWindowForm)||void 0===U?void 0:U.get("wsMin"))||void 0===k?void 0:k.value);let L=new p.p(J);L.date.valueOf()!=j.start.date.valueOf()&&(this.formWindow.start=L.date)}F.values.year=null===(D=null===(M=this.addEditReviewWindowForm)||void 0===M?void 0:M.get("weYear"))||void 0===D?void 0:D.value,F.values.month=null===(N=null===(O=this.addEditReviewWindowForm)||void 0===O?void 0:O.get("weMonth"))||void 0===N?void 0:N.value,F.values.day=null===(S=null===(Y=this.addEditReviewWindowForm)||void 0===Y?void 0:Y.get("weDay"))||void 0===S?void 0:S.value,F.values.hour="23",F.values.min="59",this.timeInput&&(F.values.hour=null===(R=null===(A=this.addEditReviewWindowForm)||void 0===A?void 0:A.get("weHour"))||void 0===R?void 0:R.value,F.values.min=null===(Q=null===(H=this.addEditReviewWindowForm)||void 0===H?void 0:H.get("weMin"))||void 0===Q?void 0:Q.value);let X=new p.p(F);X.date.valueOf()!=j.end.date.valueOf()&&(this.formWindow.end=X.date),this.store.dispatch((0,o.BB)({editWindow:this.formWindow}))}sendReviewWindowModal(){this.addEditReviewExtraInfo.processingForm=!0,this.addEditReviewExtraInfo.create?this.sendCreateReviewWindowModal():this.sendEditReviewWindowModal()}sendDeleteWindowModal(){var t,r;this.addEditReviewExtraInfo.processingForm=!0,this.formWindow={id:""},this.formWindow.id=null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===r?void 0:r.value,this.store.dispatch((0,o.yQ)({deleteWindow:this.formWindow}))}prettifyError(t){return t?t.required?"Required":t.min||t.max?"Invalid":t.notInteger||t.notNumeric?"Not number":t.valueNotInOptions?"Unknown value":t.email?"Not valid email address":t.minlength||t.maxlength?"Invalid length":t.allOrNothing?"Incomplete work information":"":""}}return d.\u0275fac=function(t){return new(t||d)(e.Y36(P.tT),e.Y36(v.F0),e.Y36(i.qu),e.Y36(G.W),e.Y36(s.yh),e.Y36(s.mK))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-create-window"]],decls:29,vars:2,consts:[[1,"animated","fadeIn"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-auto"],[1,"col","text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square"],[1,"col-4","col-md-3"],[1,"col-3","col-md-3"],[1,"col-2","col-md-3"],["class","row",4,"ngFor","ngForOf"],["addEditWindowModal",""],["sectionHeader","Current Review Cycle",3,"reviewWindow","totalTalents","reviewedTalents"],["class","badge badge-pill badge-primary",4,"ngIf"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],[1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[1,"modal-header"],[1,"modal-title","pull-left"],[4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-edit"],[1,"modal-body"],[3,"formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-row"],[1,"col-12"],["appearance","outline"],["formControlName","windowName","matInput","","placeholder","Review cycle name"],[1,"d-block"],["appearance","outline",1,"d-inline-block"],["formControlName","wsMonth","matInput","","placeholder","MM"],["formControlName","wsDay","matInput","","placeholder","DD"],["formControlName","wsYear","matInput","","placeholder","YYYY"],["formControlName","weMonth","matInput","","placeholder","MM"],["formControlName","weDay","matInput","","placeholder","DD"],["formControlName","weYear","matInput","","placeholder","YYYY"],["type","danger",3,"dismissible"],["formControlName","wsHour","matInput","","placeholder","hh"],["formControlName","wsMin","matInput","","placeholder","mm"],["formControlName","weHour","matInput","","placeholder","hh"],["formControlName","weMin","matInput","","placeholder","mm"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-remove"]],template:function(t,r){if(1&t){const m=e.EpF();e.TgZ(0,"div",0),e.YNc(1,te,3,3,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4"),e._uU(7,"All Review Cycles"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"button",7),e.NdJ("click",function(){e.CHM(m);const f=e.MAs(28);return r.addReviewWindowInfo(f)}),e._UZ(10,"i",8),e._uU(11," Add new Review Cycle "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"div",4),e.TgZ(14,"div",9),e.TgZ(15,"h6"),e._uU(16,"Review cycle:"),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"h6"),e._uU(19,"Cycle start:"),e.qZA(),e.qZA(),e.TgZ(20,"div",10),e.TgZ(21,"h6"),e._uU(22,"Cycle end:"),e.qZA(),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"h6"),e._uU(25,"More"),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,oe,13,7,"div",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,pe,20,7,"ng-template",null,13,e.W1O)}2&t&&(e.xp6(1),e.Q6J("ngIf",r.currentReviewWindow),e.xp6(25),e.Q6J("ngForOf",r.allWindows))},directives:[C.O5,ee.v,C.sg,i._Y,i.JL,i.sg,g.wx,a.KE,a.hX,i.Fj,w.Nt,i.JJ,i.u,a.TO],encapsulation:2}),d})(),ge=(()=>{class d{}return d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[v.Bz.forChild([{path:"",component:ce}]),C.ez,i.UX,g.nM,a.lN,w.c,q.HC.forRoot(),T.B]]}),d})()},1217:(z,B,u)=>{u.d(B,{O1:()=>s,HC:()=>$});var C=u(4559),i=u(9808),a=u(4893);function w(o,p){if(1&o&&(a.TgZ(0,"bar",2),a.Hsn(1),a.qZA()),2&o){const n=a.oxw();a.Q6J("type",n.type)("value",n._value)}}function v(o,p){if(1&o&&(a.TgZ(0,"bar",2),a._uU(1),a.qZA()),2&o){const n=p.$implicit;a.Q6J("type",n.type)("value",n.value),a.xp6(1),a.Oqu(n.label)}}function g(o,p){if(1&o&&a.YNc(0,v,2,3,"bar",3),2&o){const n=a.oxw();a.Q6J("ngForOf",n._value)}}const q=["*"];let T=(()=>{class o{constructor(){this.animate=!1,this.max=100}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac}),o})(),s=(()=>{class o{constructor(n){this.isStacked=!1,this.addClass=!0,this.bars=[],this._max=100,Object.assign(this,n)}set animate(n){this._animate=n,this.bars.forEach(e=>{e.animate=n})}set striped(n){this._striped=n,this.bars.forEach(e=>{e.striped=n})}set value(n){this.isStacked=Array.isArray(n),this._value=n}get isBs3(){return(0,C.XA)()}get max(){return this._max}set max(n){this._max=n,this.bars.forEach(e=>{e.recalculatePercentage()})}addBar(n){n.animate=this._animate,n.striped=this._striped,this.bars.push(n)}removeBar(n){this.bars.splice(this.bars.indexOf(n),1)}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(T))},o.\u0275cmp=a.Xpm({type:o,selectors:[["progressbar"]],hostVars:3,hostBindings:function(n,e){2&n&&(a.uIk("max",e.max),a.ekj("progress",e.addClass))},inputs:{animate:"animate",striped:"striped",value:"value",max:"max",type:"type"},ngContentSelectors:q,decls:2,vars:2,consts:[[3,"type","value",4,"ngIf"],[3,"ngIf"],[3,"type","value"],[3,"type","value",4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(a.F$t(),a.YNc(0,w,2,2,"bar",0),a.YNc(1,g,1,1,"ng-template",1)),2&n&&(a.Q6J("ngIf",!e.isStacked),a.xp6(1),a.Q6J("ngIf",e.isStacked))},directives:function(){return[i.O5,V,i.sg]},styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"]}),o})(),V=(()=>{class o{constructor(n,e,P){this.el=n,this.renderer=P,this.addClass=!0,this.percent=0,this.progress=e}get type(){return this._type}set type(n){this._type=n,this.applyTypeClasses()}get value(){return this._value}set value(n){!n&&0!==n||(this._value=n,this.recalculatePercentage())}get setBarWidth(){return this.recalculatePercentage(),this.percent}get isBs3(){return(0,C.XA)()}ngOnInit(){this.progress.addBar(this)}ngOnDestroy(){this.progress.removeBar(this)}recalculatePercentage(){this.percent=+(this.value/this.progress.max*100).toFixed(2);const n=this.progress.bars.reduce(function(e,P){return e+P.percent},0);n>100&&(this.percent-=n-100)}applyTypeClasses(){if(this._prevType){const e=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,e),this._prevType=null}if(this._type){const e=`bg-${this._type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this._type}`),this.renderer.addClass(this.el.nativeElement,e),this._prevType=this._type}}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(a.SBq),a.Y36(s,1),a.Y36(a.Qsj))},o.\u0275cmp=a.Xpm({type:o,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(n,e){2&n&&(a.uIk("aria-valuenow",e.value)("aria-valuetext",e.percent?e.percent.toFixed(0)+"%":"")("aria-valuemax",e.max),a.Udp("height","100","%")("width",e.setBarWidth,"%"),a.ekj("progress-bar-animated",!e.isBs3&&e.animate)("progress-bar-striped",e.striped)("active",e.isBs3&&e.animate)("progress-bar",e.addClass))},inputs:{type:"type",value:"value"},ngContentSelectors:q,decls:1,vars:0,template:function(n,e){1&n&&(a.F$t(),a.Hsn(0))},encapsulation:2}),o})(),$=(()=>{class o{static forRoot(){return{ngModule:o,providers:[T]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[i.ez]]}),o})()}}]);