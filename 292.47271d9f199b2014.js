"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[292],{9147:(S,m,c)=>{c.d(m,{Ib:()=>O,Vg:()=>r,ub:()=>_});var s=c(3905),e=c(4004),A=c(2340),g=c(1571),C=c(529),r=(()=>{return(i=r||(r={}))[i.CANDIDATE=0]="CANDIDATE",i[i.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",i[i.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",i[i.ACTIVE=10]="ACTIVE",i[i.ENDED=19]="ENDED",i[i.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",i[i.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",i[i.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",i[i.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",i[i.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",i[i.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",i[i.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",i[i.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",i[i.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",i[i.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",i[i.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",i[i.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",i[i.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",i[i.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",i[i.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",r;var i})();class _{static#e=this.changesReasons=[r.CHANGE_PROMOTION,r.CHANGE_LATERAL_MOVEMENT,r.CHANGE_TRANSFER_SAME_POSITION,r.CHANGE_TRANSFER_PROMOTION];static#t=this.voluntaryDismissalReasons=[r.DISMISSAL_VOLUNTARY_ABSENTEEISM,r.DISMISSAL_VOLUNTARY_ABANDONMENT,r.DISMISSAL_VOLUNTARY_RETIREMENT,r.DISMISSAL_VOLUNTARY_BETTER_OFFER,r.DISMISSAL_VOLUNTARY_PERSONAL];static#n=this.forcedDismissalReasons=[r.DISMISSAL_FORCED_END_OF_CONTRACT,r.DISMISSAL_FORCED_DISEASE,r.DISMISSAL_FORCED_DEATH,r.DISMISSAL_FORCED_LOW_PERFORMANCE,r.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,r.DISMISSAL_FORCED_OTHERS];static#o=this.allDismissalReasons=[...this.voluntaryDismissalReasons,...this.forcedDismissalReasons];static#i=this.statusNameMap=new Map([[r.CANDIDATE,"Candidate"],[r.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[r.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[r.ACTIVE,"Active"],[r.ENDED,"Ended"],[r.CHANGE_PROMOTION,"Promotion"],[r.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[r.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[r.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[r.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[r.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[r.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[r.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[r.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[r.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[r.DISMISSAL_FORCED_DISEASE,"Disease"],[r.DISMISSAL_FORCED_DEATH,"Death"],[r.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[r.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[r.DISMISSAL_FORCED_OTHERS,"Other"]])}let O=(()=>{class i{constructor(l){this.http=l,this.serverUrl=A.N.v2apiServer}static formatDates(l){return{...l,...l.from?{from:new Date(l.from)}:{},...l.until?{until:new Date(l.until)}:{}}}createEmploymentRecord(l,p,u,T,I){return(0,s.z)(this.http.post(this.serverUrl+"employment/",{job:l,talent:p,status:u,from:T.toISOString(),...I?{allowMultiple:I}:{}}).pipe((0,e.U)(E=>i.formatDates(E))))}getActiveEmploymentForTalent(l){return(0,s.z)(this.http.get(this.serverUrl+"employment/active/"+l).pipe((0,e.U)(p=>p?i.formatDates(p):null)))}getRelevantEmploymentForReview(l,p){return(0,s.z)(this.http.get(this.serverUrl+"employment/relevant/"+l+"/"+p).pipe((0,e.U)(u=>u?i.formatDates(u):null)))}getEmploymentsForTalent(l){return(0,s.z)(this.http.get(this.serverUrl+"employment/talent/"+l).pipe((0,e.U)(p=>p.map(u=>i.formatDates(u)))))}editEmployment(l,p,u,T,I){return(0,s.z)(this.http.put(this.serverUrl+"employment/"+l,{from:p.toISOString(),...void 0!==u?{status:u}:{},...void 0!==T?{until:T}:{},...void 0!==I?{notes:I}:{}}).pipe((0,e.U)(E=>i.formatDates(E))))}endEmployment(l,p,u,T){return(0,s.z)(this.http.put(this.serverUrl+"team/end-employment/"+l,{status:p,until:u.toISOString(),...T?{notes:T}:{}}).pipe((0,e.U)(I=>i.formatDates(I))))}static#e=this.\u0275fac=function(p){return new(p||i)(g.LFG(C.eN))};static#t=this.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},4053:(S,m,c)=>{c.d(m,{U:()=>_});var s=c(3905),e=c(4004),A=c(2340),g=c(9147),C=c(1571),r=c(529);let _=(()=>{class O{constructor(f){this.http=f,this.serverUrl=A.N.v2apiServer}getTeamByLeader(f){return(0,s.z)(this.http.get(this.serverUrl+"team/"+f).pipe((0,e.U)(l=>({...l,...l.employment?{employment:g.Ib.formatDates(l.employment)}:{},teamMembers:l.teamMembers.map(p=>({...p,...p.employment?{employment:g.Ib.formatDates(p.employment)}:{}}))}))))}getRelevantJobByTalent(f){return(0,s.z)(this.http.get(this.serverUrl+"team/relevant-job/"+f).pipe((0,e.U)(l=>l)))}getTopMostJobInHierarchy(){return(0,s.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,e.U)(f=>f)))}addJobEmployment(f,l,p,u){return(0,s.z)(this.http.post(this.serverUrl+"team/new-job-employment",{title:void 0,property:f,position:l,talent:p,from:u}).pipe((0,e.U)(T=>T)))}addEndedEmployment(f,l,p,u,T,I,E){return(0,s.z)(this.http.post(this.serverUrl+"team/ended-employment",{title:void 0,leaderJob:void 0,property:f,position:l,talent:p,status:u,from:T,until:I,...E?{notes:E}:{}}).pipe((0,e.U)(M=>M)))}addJob(f,l,p){return(0,s.z)(this.http.post(this.serverUrl+"job/",{leader:f,property:l,position:p}).pipe((0,e.U)(u=>u)))}removeJob(f){return(0,s.z)(this.http.delete(this.serverUrl+"job/"+f).pipe((0,e.U)(l=>l)))}getOwnActiveResponsibiliy(){return(0,s.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,e.U)(f=>f)))}static#e=this.\u0275fac=function(l){return new(l||O)(C.LFG(r.eN))};static#t=this.\u0275prov=C.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},1964:(S,m,c)=>{c.r(m),c.d(m,{JobsModule:()=>re});var s=c(6895),e=c(1571),A=c(727),g=c(4053),C=c(171),r=c(2714),_=c(7340),O=c(805),i=c(7579),f=c(3891),l=c(9443);const p=["pOrganizationChartNode",""];function u(n,d){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.node.label)}}function T(n,d){1&n&&e.GkF(0)}const I=function(n){return{$implicit:n}};function E(n,d){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,T,1,0,"ng-container",7),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.chart.getTemplateForNode(t.node))("ngTemplateOutletContext",e.VKq(2,I,t.node))}}function M(n,d){1&n&&e._UZ(0,"ChevronDownIcon",11),2&n&&e.Q6J("styleClass","p-node-toggler-icon")}function b(n,d){1&n&&e._UZ(0,"ChevronUpIcon",11),2&n&&e.Q6J("styleClass","p-node-toggler-icon")}function L(n,d){if(1&n&&(e.ynx(0),e.YNc(1,M,1,1,"ChevronDownIcon",10),e.YNc(2,b,1,1,"ChevronUpIcon",10),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.node.expanded),e.xp6(1),e.Q6J("ngIf",!t.node.expanded)}}function U(n,d){}function z(n,d){1&n&&e.YNc(0,U,0,0,"ng-template")}function y(n,d){if(1&n&&(e.TgZ(0,"span",12),e.YNc(1,z,1,0,null,7),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.chart.togglerIconTemplate)("ngTemplateOutletContext",e.VKq(2,I,t.node.expanded))}}function F(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"a",8),e.NdJ("click",function(a){e.CHM(t);const h=e.oxw(2);return e.KtG(h.toggleNode(a,h.node))})("keydown.enter",function(a){e.CHM(t);const h=e.oxw(2);return e.KtG(h.toggleNode(a,h.node))}),e.YNc(1,L,3,2,"ng-container",0),e.YNc(2,y,2,4,"span",9),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.chart.togglerIconTemplate),e.xp6(1),e.Q6J("ngIf",t.chart.togglerIconTemplate)}}function Z(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"div",4),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.uIk("colspan",t.colspan)}}const R=function(n){return{"p-organizationchart-line-top":n}};function w(n,d){if(1&n&&(e.TgZ(0,"td",14),e._uU(1,"\xa0"),e.qZA(),e.TgZ(2,"td",15),e._uU(3,"\xa0"),e.qZA()),2&n){const o=d.last;e.Q6J("ngClass",e.VKq(2,R,!d.first)),e.xp6(2),e.Q6J("ngClass",e.VKq(4,R,!o))}}function J(n,d){if(1&n&&(e.ynx(0),e.YNc(1,w,4,6,"ng-template",13),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.node.children)}}function P(n,d){if(1&n&&(e.TgZ(0,"td",16),e._UZ(1,"table",17),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Q6J("node",t)}}const B=function(n,d){return{"p-organizationchart-node-content":!0,"p-organizationchart-selectable-node":n,"p-highlight":d}};function Y(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr")(2,"td")(3,"div",1),e.NdJ("click",function(a){e.CHM(t);const h=e.oxw();return e.KtG(h.onNodeClick(a,h.node))}),e.YNc(4,u,2,1,"div",0),e.YNc(5,E,2,4,"div",0),e.YNc(6,F,3,2,"a",2),e.qZA()()(),e.TgZ(7,"tr",3)(8,"td"),e._UZ(9,"div",4),e.qZA()(),e.TgZ(10,"tr",3),e.YNc(11,Z,3,1,"ng-container",0),e.YNc(12,J,2,1,"ng-container",0),e.qZA(),e.TgZ(13,"tr",5),e.YNc(14,P,2,1,"td",6),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.colspan),e.xp6(1),e.Tol(t.node.styleClass),e.Q6J("ngClass",e.WLB(17,B,t.chart.selectionMode&&!1!==t.node.selectable,t.isSelected())),e.xp6(1),e.Q6J("ngIf",!t.chart.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",t.chart.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",!t.leaf),e.xp6(1),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.uIk("colspan",t.colspan),e.xp6(2),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.Q6J("ngIf",t.node.children&&1===t.node.children.length),e.xp6(1),e.Q6J("ngIf",t.node.children&&t.node.children.length>1),e.xp6(1),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.Q6J("ngForOf",t.node.children)}}function k(n,d){if(1&n&&e._UZ(0,"table",2),2&n){const t=e.oxw();e.Q6J("node",t.root)}}const H=function(n){return{"p-organizationchart p-component":!0,"p-organizationchart-preservespace":n}};let V=(()=>{class n{constructor(t,o){this.cd=o,this.chart=t,this.subscription=this.chart.selectionSource$.subscribe(()=>{this.cd.markForCheck()})}get leaf(){return 0!=this.node.leaf&&!(this.node.children&&this.node.children.length)}get colspan(){return this.node.children&&this.node.children.length?2*this.node.children.length:null}onNodeClick(t,o){this.chart.onNodeClick(t,o)}toggleNode(t,o){o.expanded=!o.expanded,o.expanded?this.chart.onNodeExpand.emit({originalEvent:t,node:this.node}):this.chart.onNodeCollapse.emit({originalEvent:t,node:this.node}),t.preventDefault()}isSelected(){return this.chart.isSelected(this.node)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36((0,e.Gpc)(()=>x)),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["","pOrganizationChartNode",""]],hostAttrs:[1,"p-element"],inputs:{node:"node",root:"root",first:"first",last:"last"},attrs:p,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass","click"],["tabindex","0","class","p-node-toggler",3,"click","keydown.enter",4,"ngIf"],[1,"p-organizationchart-lines",3,"ngClass"],[1,"p-organizationchart-line-down"],[1,"p-organizationchart-nodes",3,"ngClass"],["colspan","2",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0",1,"p-node-toggler",3,"click","keydown.enter"],["class","p-node-toggler-icon",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-node-toggler-icon"],["ngFor","",3,"ngForOf"],[1,"p-organizationchart-line-left",3,"ngClass"],[1,"p-organizationchart-line-right",3,"ngClass"],["colspan","2"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"node"]],template:function(t,o){1&t&&e.YNc(0,Y,15,20,"tbody",0),2&t&&e.Q6J("ngIf",o.node)},dependencies:function(){return[s.mk,s.sg,s.O5,s.tP,f.v,l.g,n]},styles:[".p-organizationchart-table{border-spacing:0;border-collapse:separate;margin:0 auto}.p-organizationchart-table>tbody>tr>td{text-align:center;vertical-align:top;padding:0 .75rem}.p-organizationchart-node-content{display:inline-block;position:relative}.p-organizationchart-node-content .p-node-toggler{position:absolute;bottom:-.75rem;margin-left:-.75rem;z-index:2;left:50%;-webkit-user-select:none;user-select:none;cursor:pointer;width:1.5rem;height:1.5rem}.p-organizationchart-node-content .p-node-toggler .p-node-toggler-icon{position:relative;top:.25rem}.p-organizationchart-line-down{margin:0 auto;height:20px;width:1px}.p-organizationchart-line-right,.p-organizationchart-line-left{border-radius:0}.p-organizationchart-selectable-node{cursor:pointer}.p-organizationchart .p-organizationchart-node-hidden{display:none}.p-organizationchart-preservespace .p-organizationchart-node-hidden{visibility:hidden;display:inherit}\n"],encapsulation:2,data:{animation:[(0,_.X$)("childState",[(0,_.SB)("in",(0,_.oB)({opacity:1})),(0,_.eR)("void => *",[(0,_.oB)({opacity:0}),(0,_.jt)(150)]),(0,_.eR)("* => void",[(0,_.jt)(150,(0,_.oB)({opacity:0}))])])]},changeDetection:0}),n})(),x=(()=>{class n{constructor(t,o){this.el=t,this.cd=o,this.preserveSpace=!0,this.selectionChange=new e.vpe,this.onNodeSelect=new e.vpe,this.onNodeUnselect=new e.vpe,this.onNodeExpand=new e.vpe,this.onNodeCollapse=new e.vpe,this.selectionSource=new i.x,this.selectionSource$=this.selectionSource.asObservable()}get selection(){return this._selection}set selection(t){this._selection=t,this.initialized&&this.selectionSource.next(null)}get root(){return this.value&&this.value.length?this.value[0]:null}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{"togglericon"===t.getType()?this.togglerIconTemplate=t.template:this.templateMap[t.getType()]=t.template}),this.initialized=!0}getTemplateForNode(t){return this.templateMap?t.type?this.templateMap[t.type]:this.templateMap.default:null}onNodeClick(t,o){let a=t.target;if((!a.className||-1===a.className.indexOf("p-node-toggler")&&-1===a.className.indexOf("p-node-toggler-icon"))&&this.selectionMode){if(!1===o.selectable)return;let h=this.findIndexInSelection(o),N=h>=0;"single"===this.selectionMode?N?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:o})):(this.selection=o,this.onNodeSelect.emit({originalEvent:t,node:o})):"multiple"===this.selectionMode&&(N?(this.selection=this.selection.filter((v,D)=>D!=h),this.onNodeUnselect.emit({originalEvent:t,node:o})):(this.selection=[...this.selection||[],o],this.onNodeSelect.emit({originalEvent:t,node:o}))),this.selectionChange.emit(this.selection),this.selectionSource.next(null)}}findIndexInSelection(t){let o=-1;if(this.selectionMode&&this.selection)if("single"===this.selectionMode)o=this.selection==t?0:-1;else if("multiple"===this.selectionMode)for(let a=0;a<this.selection.length;a++)if(this.selection[a]==t){o=a;break}return o}isSelected(t){return-1!=this.findIndexInSelection(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-organizationChart"]],contentQueries:function(t,o,a){if(1&t&&e.Suo(a,O.jx,4),2&t){let h;e.iGM(h=e.CRH())&&(o.templates=h)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",selectionMode:"selectionMode",preserveSpace:"preserveSpace",selection:"selection"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse"},decls:2,vars:7,consts:[[3,"ngStyle","ngClass"],["class","p-organizationchart-table","pOrganizationChartNode","",3,"node",4,"ngIf"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"node"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,k,1,1,"table",1),e.qZA()),2&t&&(e.Tol(o.styleClass),e.Q6J("ngStyle",o.style)("ngClass",e.VKq(5,H,o.preserveSpace)),e.xp6(1),e.Q6J("ngIf",o.root))},dependencies:[s.mk,s.O5,s.PC,V],encapsulation:2,changeDetection:0}),n})(),j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.ez,f.v,l.g,O.m8,O.m8]}),n})();var Q=c(8652);const W=function(n){return{j:n}};function G(n,d){if(1&n&&(e.TgZ(0,"a",7),e._UZ(1,"i",8),e._uU(2," View in Job Navigator "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("queryParams",e.VKq(1,W,t.selected[0].key))}}function K(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerLeaderChange())}),e._UZ(1,"i",10),e._uU(2," Move leader "),e.qZA()}}function q(n,d){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,G,3,3,"a",5),e.YNc(2,K,3,0,"button",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1===t.selected.length),e.xp6(1),e.Q6J("ngIf",t.canMoveLeader&&t.selected.length>=1)}}function $(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.submitMoveLeader())}),e._UZ(1,"i",10),e._uU(2," Choose as leader "),e.qZA()}}function X(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",4),e.YNc(2,$,3,0,"button",11),e.qZA(),e.TgZ(3,"div",12)(4,"h5"),e._uU(5,"Hierarchy Change Mode"),e.qZA(),e._uU(6),e._UZ(7,"br"),e.TgZ(8,"strong"),e._uU(9,"Please note:"),e.qZA(),e._uU(10," this action is not recommended. It is intended to correct mistakes when defining the hierarchy."),e._UZ(11,"br"),e.TgZ(12,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelLeaderChange())}),e._uU(13,"Click here to cancel"),e.qZA(),e._uU(14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selected.length>=1),e.xp6(4),e.hij(" You have selected ",t.jobsToMove.length," jobs to move in the hierarchy."),e.xp6(8),e.hij(" or select the leader of the ",t.jobsToMove.length," selected jobs. ")}}function ee(n,d){1&n&&(e.TgZ(0,"p",18),e._UZ(1,"i",19),e._uU(2,"Vacant job "),e.qZA()),2&n&&e.Udp("line-height",1.2)("font-size",.7,"em")}function te(n,d){if(1&n&&(e.TgZ(0,"p",15),e._uU(1),e.qZA(),e.TgZ(2,"p",16),e._uU(3),e.qZA(),e.TgZ(4,"p",16),e._uU(5),e.qZA(),e.TgZ(6,"p",15),e._uU(7),e.qZA(),e.YNc(8,ee,3,4,"p",17)),2&n){const t=d.$implicit;e.Udp("line-height",1.2),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.name," "),e.xp6(1),e.Udp("line-height",1.2)("font-size",.7,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.area," "),e.xp6(1),e.Udp("line-height",1.2)("font-size",.7,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.department," "),e.xp6(1),e.Udp("line-height",1.3)("font-size",.9,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.property?null:t.data.property.name," "),e.xp6(1),e.Q6J("ngIf",null===t.data.employment)}}let ne=(()=>{class n{constructor(t,o){this.teamApiService=t,this.authStateService=o,this.data=[],this.selectionMode="multiple",this.selected=[],this.leaderChangeMode=!1,this.canMoveLeader=!1,this.subscriptions=new A.w0,this.jobsToMove=[],this.subscriptions.add(this.authStateService.authState.subscribe(a=>{"SuperAdmin"==a.identity?.role&&(this.canMoveLeader=!0)}))}ngOnInit(){this.fetchTopLevelJob()}createNodeFromJob(t,o=[]){return{key:t._id,type:"job",label:t.position.name,leaf:!1,data:{position:t.position,property:t.property,employment:t.employment},children:o,expanded:o&&0!==o.length||!1}}findChild(t,o){if(void 0===o&&(o=this.data[0]),o.key===t)return o;if(o.children)for(let a of o.children){const h=this.findChild(t,a);if(void 0!==h)return h}}flattenNode(t,o){if(void 0===o&&(o=[t]),t.children)for(let a of t.children)o?.push(a),this.flattenNode(a,o);return o}nodeExpanded({node:t}){this.fetchChildrenForJob(t.key)}nodeCollapsed({node:t}){let o=this.flattenNode(t);o.shift(),this.selected=this.selected.filter(a=>!o.some(h=>h.key==a.key))}nodeSelected(t){this.selected.push(t.node)}nodeUnselected(t){this.selected=this.selected.filter(o=>o.key!=t.node.key)}getSelectedNodes(t){const o=this.flattenNode(this.data[0]);return t.map(a=>o.find(h=>h.key===a.key)).filter(a=>void 0!==a)}triggerLeaderChange(){this.jobsToMove=this.selected,this.selected=[],this.leaderChangeMode=!0,this.selectionMode="single"}cancelLeaderChange(){this.selected=this.jobsToMove,this.leaveLeaderChangeMode()}leaveLeaderChangeMode(){this.jobsToMove=[],this.leaderChangeMode=!1,this.selectionMode="multiple"}submitMoveLeader(){const t=this.selected.pop();this.selected=[],console.log("New desired Leader: ",t?.key),console.log("Jobs to move: ",this.jobsToMove?.map(o=>o.key)),this.leaveLeaderChangeMode()}fetchTopLevelJob(){this.teamApiService.getTopMostJobInHierarchy().then(t=>this.teamApiService.getTeamByLeader(t.jobId)).then(t=>{let o=t.teamMembers.map(a=>this.createNodeFromJob(a));this.data=[this.createNodeFromJob(t,o)]})}fetchChildrenForJob(t){this.teamApiService.getTeamByLeader(t).then(o=>{const a=this.findChild(o._id);if(void 0===a)return;let h=o.teamMembers.map(N=>this.createNodeFromJob(N,[]));if(a.children)for(let N of a.children){let v=h.findIndex(D=>D.key===N.key);-1!=v&&(N={...h[v],children:N.children},h.splice(v,1))}a.children?.push(...h),this.data=JSON.parse(JSON.stringify(this.data)),this.selected=this.getSelectedNodes(this.selected)})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(g.U),e.Y36(C.V))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["org-chart-widget"]],decls:5,vars:7,consts:[["class","text-right",4,"ngIf"],[4,"ngIf"],[3,"value","selectionMode","selection","onNodeExpand","onNodeCollapse","onNodeSelect","onNodeUnselect"],["pTemplate","job"],[1,"text-right"],["class","btn btn-outline-primary mr-2","routerLink","/app/team",3,"queryParams",4,"ngIf"],["class","btn btn-outline-dark",3,"click",4,"ngIf"],["routerLink","/app/team",1,"btn","btn-outline-primary","mr-2",3,"queryParams"],["aria-hidden","true",1,"fas","fa-sitemap","pr-1"],[1,"btn","btn-outline-dark",3,"click"],["aria-hidden","true",1,"fas","fa-arrows-alt","pr-1"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"mt-2","alert","alert-info"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"mb-1"],[1,"mb-1","font-weight-light"],["class","mb-0",3,"line-height","font-size",4,"ngIf"],[1,"mb-0"],["aria-hidden","true",1,"fa","fa-info-circle","mr-1","text-warning"]],template:function(o,a){1&o&&(e.YNc(0,q,3,2,"div",0),e.YNc(1,X,15,3,"div",1),e.TgZ(2,"alasta-overflow-shadow-container")(3,"p-organizationChart",2),e.NdJ("onNodeExpand",function(N){return a.nodeExpanded(N)})("onNodeCollapse",function(N){return a.nodeCollapsed(N)})("onNodeSelect",function(N){return a.nodeSelected(N)})("onNodeUnselect",function(N){return a.nodeUnselected(N)}),e.YNc(4,te,9,19,"ng-template",3),e.qZA()()),2&o&&(e.Q6J("ngIf",!a.leaderChangeMode),e.xp6(1),e.Q6J("ngIf",a.leaderChangeMode&&a.canMoveLeader),e.xp6(2),e.Udp("flex-grow",1),e.Q6J("value",a.data)("selectionMode",a.selectionMode)("selection",a.selected))},dependencies:[s.O5,r.rH,x,O.jx,Q.t]})}return n})(),oe=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["alasta-jobs"]],decls:7,vars:0,consts:[[1,"card","content-section-card"],[1,"card-body"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Organization Chart"),e.qZA(),e.TgZ(4,"p"),e._uU(5," You can view your full organization chart on this page and go to the Job Navigator for more fine-grained control. "),e.qZA(),e._UZ(6,"org-chart-widget"),e.qZA()())},dependencies:[ne]})}return n})();var ie=c(6781),ae=c(5593);let re=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[s.ez,r.Bz.forChild([{path:"",component:oe}]),j,ae.hJ,ie._]})}return n})()},3891:(S,m,c)=>{c.d(m,{v:()=>A});var s=c(1571),e=c(7832);let A=(()=>{class g extends e.s{}return g.\u0275fac=function(){let C;return function(_){return(C||(C=s.n5z(g)))(_||g)}}(),g.\u0275cmp=s.Xpm({type:g,selectors:[["ChevronDownIcon"]],standalone:!0,features:[s.qOj,s.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(r,_){1&r&&(s.O4$(),s.TgZ(0,"svg",0),s._UZ(1,"path",1),s.qZA()),2&r&&(s.Tol(_.getClassNames()),s.uIk("aria-label",_.ariaLabel)("aria-hidden",_.ariaHidden)("role",_.role))},encapsulation:2}),g})()},162:(S,m,c)=>{c.d(m,{L:()=>A});var s=c(1571),e=c(7832);let A=(()=>{class g extends e.s{}return g.\u0275fac=function(){let C;return function(_){return(C||(C=s.n5z(g)))(_||g)}}(),g.\u0275cmp=s.Xpm({type:g,selectors:[["SpinnerIcon"]],standalone:!0,features:[s.qOj,s.jDz],decls:6,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_417_21408)"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],["id","clip0_417_21408"],["width","14","height","14","fill","white"]],template:function(r,_){1&r&&(s.O4$(),s.TgZ(0,"svg",0)(1,"g",1),s._UZ(2,"path",2),s.qZA(),s.TgZ(3,"defs")(4,"clipPath",3),s._UZ(5,"rect",4),s.qZA()()()),2&r&&(s.Tol(_.getClassNames()),s.uIk("aria-label",_.ariaLabel)("aria-hidden",_.ariaHidden)("role",_.role))},encapsulation:2}),g})()}}]);