"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[538],{9913:(M,g,i)=>{i.d(g,{Z:()=>C});var t=i(1571),e=i(433),u=i(8372),l=i(9766),c=i(6895),d=i(2210),m=i(805),r=i(5722);function s(a,h){if(1&a&&(t.TgZ(0,"div",9)(1,"em"),t._uU(2),t.qZA()()),2&a){const p=t.oxw(2);t.xp6(2),t.Oqu(p.filter.metadata.visibleName)}}const o=function(){return[]};function n(a,h){if(1&a&&(t.TgZ(0,"p-dropdown",7),t.YNc(1,s,3,1,"ng-template",8),t.qZA()),2&a){const p=t.oxw();t.Q6J("formControl",p.control)("options",p.filter.metadata.options||t.DdM(5,o))("filter",!0)("placeholder",p.filter.metadata.visibleName)("showClear",p.filter.value&&!p.filter.metadata.required)}}function _(a,h){if(1&a&&t._UZ(0,"p-multiSelect",10),2&a){const p=t.oxw();t.Q6J("formControl",p.control)("options",p.filter.metadata.options||t.DdM(3,o))("placeholder",p.filter.metadata.visibleName)}}function f(a,h){if(1&a&&t._UZ(0,"p-multiSelect",11),2&a){const p=t.oxw();t.Q6J("formControl",p.control)("filter",!1)("options",p.filter.metadata.options||t.DdM(4,o))("placeholder",p.filter.metadata.visibleName)}}function E(a,h){if(1&a&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&a){const p=h.$implicit;t.Q6J("value",p.value),t.xp6(1),t.Oqu(p.name)}}function P(a,h){if(1&a&&(t.TgZ(0,"select",12),t.YNc(1,E,2,2,"option",13),t.qZA()),2&a){const p=t.oxw();t.Q6J("formControl",p.control),t.xp6(1),t.Q6J("ngForOf",p.filter.metadata.options)}}function v(a,h){if(1&a){const p=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){t.CHM(p);const D=t.oxw();return t.KtG(D.onRemove.emit())}),t._UZ(1,"i",16),t.qZA()}}let C=(()=>{class a{constructor(){this.canRemove=!0,this.filterClass="",this.onRemove=new t.vpe}get FilterType(){return l.v}ngOnInit(){this.control=new e.p4(this.filter.value),this.control.valueChanges.pipe((0,u.b)(200)).subscribe(p=>{this.filter.value=p}),this.filter.valueChanges.subscribe(()=>{this.control.setValue(this.filter.value,{emitEvent:!1})})}}return a.\u0275fac=function(p){return new(p||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["alasta-filter-item"]],inputs:{filter:"filter",canRemove:"canRemove",filterClass:"filterClass"},outputs:{onRemove:"onRemove"},decls:7,vars:6,consts:[["id","filter-item",3,"ngClass"],["id","filter-value",3,"ngSwitch"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder",4,"ngSwitchCase"],[3,"formControl",4,"ngSwitchDefault"],["id","filter-remover","class","btn btn-sm btn-secondary-outline p-1",3,"click",4,"ngIf"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear"],["pTemplate","header"],[1,"filter-dropdown-header"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","filter-remover",1,"btn","btn-sm","btn-secondary-outline","p-1",3,"click"],[1,"fas","fa-trash-alt"]],template:function(p,O){1&p&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,n,2,6,"p-dropdown",2),t.YNc(3,_,1,4,"p-multiSelect",3),t.YNc(4,f,1,5,"p-multiSelect",4),t.YNc(5,P,2,2,"select",5),t.qZA(),t.YNc(6,v,2,0,"a",6),t.qZA()),2&p&&(t.Q6J("ngClass",O.filterClass),t.xp6(1),t.Q6J("ngSwitch",O.filter.metadata.type),t.xp6(1),t.Q6J("ngSwitchCase",O.FilterType.DROPDOWN_SEARCH),t.xp6(1),t.Q6J("ngSwitchCase",O.FilterType.MULTISELECT_SEARCH),t.xp6(1),t.Q6J("ngSwitchCase",O.FilterType.MULTISELECT),t.xp6(2),t.Q6J("ngIf",O.canRemove))},dependencies:[c.mk,c.sg,c.O5,c.RF,c.n9,c.ED,e.YN,e.Kr,e.EJ,e.JJ,e.oH,d.Lt,m.jx,r.NU],styles:["#filter-item[_ngcontent-%COMP%]{border-radius:.25rem;display:inline-flex;justify-content:center;align-items:center}#filter-item[_ngcontent-%COMP%]   #filter-remover[_ngcontent-%COMP%]{margin:0 .3rem;width:1.4rem;height:1.4rem;line-height:0;border-radius:.25%}.filter-dropdown-header[_ngcontent-%COMP%]{padding:.2rem .75rem;background-color:#efefef}"]}),a})()},7064:(M,g,i)=>{i.d(g,{i:()=>r});var t=i(6895),e=i(433),u=i(9245),l=i(3345),c=i(2210),d=i(5722),m=i(1571);let r=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[t.ez,e.UX,u.mr,l.k,c.kW,d.q4]}),s})()},5653:(M,g,i)=>{i.d(g,{i:()=>c});var t=i(1571),e=i(1135),u=i(7197),l=i(6817);let c=(()=>{class d{constructor(r){this._filterGroupSubject=new e.X([]),this.filterGroupsState=this._filterGroupSubject.asObservable(),this.valueChange=new t.vpe,this.lastInformed=void 0,r?(this.dropdownOptions=r.dropdownOptions,this.filtersMetadata=r.filtersMetadata):(this.dropdownOptions=[],this.filtersMetadata=[]);for(const s of this.filtersMetadata)if(s.required){let o=new l.w(s,"");this.addFilter(o)}}recursiveFindFiltersMetadata(r,s,o=!1){s||(s=this.filtersMetadata);for(const n of s){if(r(n))return n;if(n.children){const _=this.recursiveFindFiltersMetadata(r,n.children);if(_)return o&&this.addFilter(new l.w(n,"")),_}}}getMetadataWithId(r){return this.recursiveFindFiltersMetadata(s=>s.id==r)}addFilter(r,s=!1,o=!0){let n=this._filterGroupSubject.getValue(),_=n.find(f=>f.groupName==r.metadata.group);if(_){if(!r.metadata.multiple){const f=_.filters.find(E=>E.metadata.id==r.metadata.id);if(f)return void(s&&f.value!=r.value?f.setValue(r.value,!0,{ignoreChange:o}):console.warn("Filter already selected and has value"))}_.filters.push(r)}else _={groupName:r.metadata.group,filters:[r]},n.push(_);r.valueChanges.subscribe(f=>{f&&f.additional&&f.additional.ignoreChange||this.informChange()}),this._filterGroupSubject.next(n)}addFilterWithId(r,s=""){const o=this.recursiveFindFiltersMetadata(n=>n.id==r,void 0,!0);if(o){const n=new l.w(o,s);this.addFilter(n,!0,!1)}else console.warn("There is no filter with this ID")}canRemoveFilter(r){return!(r.metadata.required||r.metadata.children&&r.metadata.children.length>0&&this.getUngroupedFilters().some(s=>r.metadata.children?.some(o=>o.id==s.metadata.id)))}removeFilter(r){if(!this.canRemoveFilter(r))return;let s=this._filterGroupSubject.getValue(),o=s.find(n=>n.groupName==r.metadata.group);o&&(o.filters=o.filters.filter(n=>n!=r),0==o.filters.length&&s.splice(s.indexOf(o),1)),this._filterGroupSubject.next(s),this.informChange()}getUngroupedFilters(){const r=this._filterGroupSubject.getValue();let s=[];for(const o of r)s.push(...o.filters);return s}getSimpleFilterListValue(){let r={};const s=this.getUngroupedFilters();for(const o of s)if(u.g.hasValue(o.value)){if(s.some(n=>n.metadata.children&&n.metadata.children.some(_=>o.metadata.id==_.id)&&!u.g.hasValue(n.value)))continue;Object.keys(r).includes(o.metadata.key)?Array.isArray(r[o.metadata.key])?r[o.metadata.key].push(o.value):r[o.metadata.key]=[r[o.metadata.key],o.value]:r[o.metadata.key]=o.value}return r}informChange(){const r=this.getSimpleFilterListValue();this.isEqual(this.lastInformed,r)||(this.valueChange.emit(r),this.lastInformed=r)}addFilterValues(r){const s=this.getSimpleFilterListValue();for(let o of Object.keys(r)){const n=this.recursiveFindFiltersMetadata(_=>_.key==o);if(n){const _=new l.w(n,r[o]);this.addFilter(_,!0)}else console.warn("There is no filter with this key")}this.isEqual(this.getSimpleFilterListValue(),s)||this.informChange()}isEqual(r,s){return JSON.stringify(r)==JSON.stringify(s)}}return d.\u0275fac=function(r){return new(r||d)(t.LFG("filterConfiguration",8))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac}),d})()},4829:(M,g,i)=>{i.d(g,{a:()=>P});var t=i(7197),e=i(1571),u=i(6895),l=i(9245),c=i(9913);const d=["selector"];function m(v,C){1&v&&e.Hsn(0,0,["*ngTemplateOutlet","selector ? selector : defaultSelector"])}function r(v,C){if(1&v&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&v){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.groupName)}}function s(v,C){if(1&v){const a=e.EpF();e.TgZ(0,"alasta-filter-item",10),e.NdJ("onRemove",function(){const O=e.CHM(a).$implicit,D=e.oxw(2);return e.KtG(D.service.removeFilter(O))}),e.qZA()}if(2&v){const a=C.$implicit,h=e.oxw(2);e.Gre("order-",a.metadata.groupOrder," mx-1 mb-1"),e.Q6J("filter",a)("filterClass",h.filterNeedsValue(a)?"border border-danger":"border border-secondary")("canRemove",h.service.canRemoveFilter(a))}}function o(v,C){if(1&v&&(e.TgZ(0,"div",5),e.YNc(1,r,2,1,"span",6),e.TgZ(2,"div",7),e.YNc(3,s,1,6,"alasta-filter-item",8),e.qZA()()),2&v){const a=C.$implicit;e.xp6(1),e.Q6J("ngIf",a.groupName),e.xp6(2),e.Q6J("ngForOf",a.filters)}}function n(v,C){if(1&v){const a=e.EpF();e.TgZ(0,"li",17)(1,"button",18),e.NdJ("click",function(){const O=e.CHM(a).$implicit,D=e.oxw(3);return e.KtG(D.service.addFilterWithId(O.id))}),e._uU(2),e.qZA()()}if(2&v){const a=C.$implicit,h=e.oxw(3);e.xp6(1),e.Q6J("disabled",h.canSelectDropdownOption(a.id)),e.xp6(1),e.hij(" ",a.name," ")}}function _(v,C){if(1&v&&(e.TgZ(0,"ul",15),e.YNc(1,n,3,2,"li",16),e.qZA()),2&v){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.service.dropdownOptions)}}function f(v,C){1&v&&(e.TgZ(0,"div",11)(1,"button",12),e._uU(2," Add filter "),e._UZ(3,"span",13),e.qZA(),e.YNc(4,_,2,1,"ul",14),e.qZA())}const E=["*"];let P=(()=>{class v{constructor(){}ngOnInit(){}canSelectDropdownOption(a){return!!this.service.getUngroupedFilters().some(h=>h.metadata.id==a&&!h.metadata.multiple)}filterNeedsValue(a){return!(t.g.hasValue(a.value)||!a.metadata.children||!this.service.getUngroupedFilters().some(h=>a.metadata.children?.some(p=>p.id==h.metadata.id)&&t.g.hasValue(h.value)))}}return v.\u0275fac=function(a){return new(a||v)},v.\u0275cmp=e.Xpm({type:v,selectors:[["alasta-filters-list"]],contentQueries:function(a,h,p){if(1&a&&e.Suo(p,d,5),2&a){let O;e.iGM(O=e.CRH())&&(h.selector=O.first)}},inputs:{service:"service"},ngContentSelectors:E,decls:7,vars:4,consts:[["id","filters-list",1,"d-flex","flex-wrap"],["id","filters-dropdown",1,"mr-1"],[4,"ngTemplateOutlet"],["class","filter-group border border-primary mr-1 mb-1",4,"ngFor","ngForOf"],["defaultSelector",""],[1,"filter-group","border","border-primary","mr-1","mb-1"],["class","filter-group-title",4,"ngIf"],[1,"d-flex","flex-wrap"],[3,"class","filter","filterClass","canRemove","onRemove",4,"ngFor","ngForOf"],[1,"filter-group-title"],[3,"filter","filterClass","canRemove","onRemove"],["dropdown","",1,"btn-group"],["id","filter-dropdown-button","dropdownToggle","","type","button","aria-controls","filter-dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","filter-dropdown","class","dropdown-menu","role","menu","aria-labelledby","filter-dropdown-button",4,"dropdownMenu"],["id","filter-dropdown","role","menu","aria-labelledby","filter-dropdown-button",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item",3,"disabled","click"]],template:function(a,h){if(1&a&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,m,1,0,"ng-content",2),e.qZA(),e.YNc(3,o,4,2,"div",3),e.ALo(4,"async"),e.qZA(),e.YNc(5,f,5,0,"ng-template",null,4,e.W1O)),2&a){const p=e.MAs(6);e.xp6(2),e.Q6J("ngTemplateOutlet",h.selector?h.selector:p),e.xp6(1),e.Q6J("ngForOf",e.lcZ(4,2,h.service.filterGroupsState))}},dependencies:[u.sg,u.O5,u.tP,l.Hz,l.Mq,l.TO,c.Z,u.Ov],styles:[".filter-group[_ngcontent-%COMP%]{border-radius:.25rem}.filter-group[_ngcontent-%COMP%] > .filter-group-title[_ngcontent-%COMP%]{display:block;font-size:.8rem;margin:0 .8rem}"]}),v})()},9766:(M,g,i)=>{i.d(g,{v:()=>t});var t=(()=>{return(e=t||(t={}))[e.DROPDOWN_SEARCH=0]="DROPDOWN_SEARCH",e[e.MULTISELECT_SEARCH=1]="MULTISELECT_SEARCH",e[e.MULTISELECT=2]="MULTISELECT",e[e.TEXT_INPUT=3]="TEXT_INPUT",e[e.TOGGLE=4]="TOGGLE",t;var e})()},6817:(M,g,i)=>{i.d(g,{w:()=>e});var t=i(1571);class e{constructor(l,c){this.valueChanges=new t.vpe,this.metadata=l,this.value=c}set value(l){this.setValue(l)}setValue(l,c=!0,d){this._value=l,c&&this.valueChanges.emit({value:this._value,additional:d})}get value(){return this._value}}},797:(M,g,i)=>{i.d(g,{_:()=>m});var t=i(3905),e=i(4004),u=i(262),l=i(2340),c=i(1571),d=i(529);let m=(()=>{class r{constructor(o){this.http=o,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findDistinctLocations(o,n){return(0,t.z)(this.http.post(this.serverUrl+"location/filter-distinct",{...o?{country:o}:{},...n?{location:n}:{}}).pipe((0,e.U)(_=>({countries:_.distinctOptions[0].countries,properties:_.distinctOptions[0].locations})),(0,u.K)(_=>(console.error(_.error),[]))))}getAllProperties(){return(0,t.z)(this.http.get(this.serverV2Url+"property").pipe((0,e.U)(o=>({properties:o})),(0,u.K)(o=>(console.error(o.error),[]))))}}return r.\u0275fac=function(o){return new(o||r)(c.LFG(d.eN))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},917:(M,g,i)=>{i.d(g,{m:()=>r});var t=i(5861),e=i(3905),u=i(4004),l=i(9550),c=i(2340),d=i(1571),m=i(529);let r=(()=>{class s{constructor(n){this.http=n,this.serverUrl=c.N.apiServer,this.serverV2Url=c.N.v2apiServer,this._findCachedDistinctPositions=new l.F(this,this.findDistinctPositions,function(){var _=(0,t.Z)(function*(f,E,P){return(f||"")+(E||"")+(P||"")});return function(f,E,P){return _.apply(this,arguments)}}())}findDistinctPositions(n,_,f){return(0,e.z)(this.http.post(this.serverUrl+"position/filter-distinct",{...n?{area:n}:{},..._?{department:_}:{},...f?{position:f}:{}}).pipe((0,u.U)(E=>({areas:E.distinctOptions[0].areas.sort(),departments:E.distinctOptions[0].departments.sort(),positions:E.distinctOptions[0].positions.sort()}))))}findCachedDistinctPositions(n,_,f){return this._findCachedDistinctPositions.get(n,_,f)}getAllPositions(){return(0,e.z)(this.http.get(this.serverV2Url+"position").pipe((0,u.U)(n=>({positions:n}))))}listPositions(n,_,f){return(0,e.z)(this.http.get(this.serverV2Url+"position/list",{params:{...n?{search:n}:{},...f?{page:f}:{},..._?{count:_}:{}}}).pipe((0,u.U)(E=>E)))}createPosition(n){return this._findCachedDistinctPositions.clear(),(0,e.z)(this.http.post(this.serverV2Url+"position",{...n.name?{name:n.name}:{},...n.department?{department:n.department}:{},...n.area?{area:n.area}:{},...n.description?{description:n.description}:{},evaluationFormId:n.evaluationFormId}).pipe((0,u.U)(_=>_)))}editPosition(n,_){return this._findCachedDistinctPositions.clear(),(0,e.z)(this.http.put(this.serverV2Url+"position/"+n,{..._.name?{name:_.name}:{},..._.department?{department:_.department}:{},..._.area?{area:_.area}:{},..._.description?{description:_.description}:{},evaluationFormId:_.evaluationFormId}).pipe((0,u.U)(f=>f)))}}return s.\u0275fac=function(n){return new(n||s)(d.LFG(m.eN))},s.\u0275prov=d.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},8254:(M,g,i)=>{i.d(g,{M:()=>d});var t=i(3905),e=i(4004),u=i(2340),l=i(1571),c=i(529);let d=(()=>{class m{constructor(s){this.http=s,this.serverUrl=u.N.v2apiServer}getBoxes(){return(0,t.z)(this.http.get(this.serverUrl+"talent-map-box").pipe((0,e.U)(s=>({boxes:s.sort((o,n)=>o.pos-n.pos)}))))}}return m.\u0275fac=function(s){return new(s||m)(l.LFG(c.eN))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},2338:(M,g,i)=>{i.d(g,{F:()=>t});class t{static encodeObjectToURLParam(u,l=""){const c=Object.keys(u).map(d=>{const m=u[d];return u.constructor===Array?d=`${l}[]`:u.constructor===Object&&(d=l?`${l}[${d}]`:d),"object"==typeof m?this.encodeObjectToURLParam(m,d):`${d}=${encodeURIComponent(m)}`});return[].concat.apply([],c).join("&")}static decodeURLParamToObject(u){let l={};for(const c of u.split("&")){let[d,m]=c.split("=");m=decodeURIComponent(m),this.handleSingleValue(l,d,m)}return l}static handleSingleValue(u,l,c){if(l.includes("["))if("[]"==l)u.push(c);else{const d=l.indexOf("["),m=l.indexOf("]"),r=l.substring(0,d);if(d+1==m){const s=l.substring(d);if(""!=r)null==u[r]&&(u[r]=[]),this.handleSingleValue(u[r],s,c);else{const o=l.substring(m+1),n=o.indexOf("["),_=o.indexOf("]");if(n+1==_){let f=[];u.push(f),this.handleSingleValue(f,o,c)}else{const f=o.substring(n+1,_)+o.substring(_+1);let E={};u.push(E),this.handleSingleValue(E,f,c)}}}else{const s=l.substring(d+1,m)+l.substring(m+1);null==u[r]&&(u[r]={}),this.handleSingleValue(u[r],s,c)}}else u[l]=c}}},9550:(M,g,i)=>{i.d(g,{F:()=>e});var t=i(5861);class e{constructor(l,c,d=(0,t.Z)(function*(){return"default"})){this.thisArg=l,this._cachedResponseMap=new Map,this._serviceOperation=c,this._cacheKeyMapper=d}get(...l){var c=this;return(0,t.Z)(function*(){const d=yield c._cacheKeyMapper.apply(c.thisArg,l);let m=c._cachedResponseMap.get(d);return void 0===m&&(m=yield c._serviceOperation.apply(c.thisArg,l),c._cachedResponseMap.set(d,m)),m})()}clear(...l){var c=this;return(0,t.Z)(function*(){if(l&&l.length){const d=yield c._cacheKeyMapper.apply(c.thisArg,l);c._cachedResponseMap.delete(d)}else c._cachedResponseMap.clear()})()}}}}]);