"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[357],{9147:(w,M,a)=>{a.d(M,{Ib:()=>v,Vg:()=>s,ub:()=>L});var p=a(3905),h=a(4004),D=a(2340),m=a(1571),f=a(529),s=(()=>{return(o=s||(s={}))[o.CANDIDATE=0]="CANDIDATE",o[o.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",o[o.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",o[o.ACTIVE=10]="ACTIVE",o[o.ENDED=19]="ENDED",o[o.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",o[o.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",o[o.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",o[o.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",o[o.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",o[o.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",o[o.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",o[o.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",o[o.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",o[o.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",o[o.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",o[o.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",o[o.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",o[o.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",o[o.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",s;var o})();class L{static#t=this.changesReasons=[s.CHANGE_PROMOTION,s.CHANGE_LATERAL_MOVEMENT,s.CHANGE_TRANSFER_SAME_POSITION,s.CHANGE_TRANSFER_PROMOTION];static#e=this.voluntaryDismissalReasons=[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,s.DISMISSAL_VOLUNTARY_ABANDONMENT,s.DISMISSAL_VOLUNTARY_RETIREMENT,s.DISMISSAL_VOLUNTARY_BETTER_OFFER,s.DISMISSAL_VOLUNTARY_PERSONAL];static#i=this.forcedDismissalReasons=[s.DISMISSAL_FORCED_END_OF_CONTRACT,s.DISMISSAL_FORCED_DISEASE,s.DISMISSAL_FORCED_DEATH,s.DISMISSAL_FORCED_LOW_PERFORMANCE,s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,s.DISMISSAL_FORCED_OTHERS];static#n=this.allDismissalReasons=[...this.voluntaryDismissalReasons,...this.forcedDismissalReasons];static#r=this.statusNameMap=new Map([[s.CANDIDATE,"Candidate"],[s.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[s.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[s.ACTIVE,"Active"],[s.ENDED,"Ended"],[s.CHANGE_PROMOTION,"Promotion"],[s.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[s.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[s.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[s.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[s.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[s.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[s.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[s.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[s.DISMISSAL_FORCED_DISEASE,"Disease"],[s.DISMISSAL_FORCED_DEATH,"Death"],[s.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[s.DISMISSAL_FORCED_OTHERS,"Other"]])}let v=(()=>{class o{constructor(i){this.http=i,this.serverUrl=D.N.v2apiServer}static formatDates(i){return{...i,...i.from?{from:new Date(i.from)}:{},...i.until?{until:new Date(i.until)}:{}}}createEmploymentRecord(i,l,u,A,T){return(0,p.z)(this.http.post(this.serverUrl+"employment/",{job:i,talent:l,status:u,from:A.toISOString(),...T?{allowMultiple:T}:{}}).pipe((0,h.U)(R=>o.formatDates(R))))}getActiveEmploymentForTalent(i){return(0,p.z)(this.http.get(this.serverUrl+"employment/active/"+i).pipe((0,h.U)(l=>l?o.formatDates(l):null)))}getRelevantEmploymentForReview(i,l){return(0,p.z)(this.http.get(this.serverUrl+"employment/relevant/"+i+"/"+l).pipe((0,h.U)(u=>u?o.formatDates(u):null)))}getEmploymentsForTalent(i){return(0,p.z)(this.http.get(this.serverUrl+"employment/talent/"+i).pipe((0,h.U)(l=>l.map(u=>o.formatDates(u)))))}editEmployment(i,l,u,A,T){return(0,p.z)(this.http.put(this.serverUrl+"employment/"+i,{from:l.toISOString(),...void 0!==u?{status:u}:{},...void 0!==A?{until:A}:{},...void 0!==T?{notes:T}:{}}).pipe((0,h.U)(R=>o.formatDates(R))))}endEmployment(i,l,u,A){return(0,p.z)(this.http.put(this.serverUrl+"team/end-employment/"+i,{status:l,until:u.toISOString(),...A?{notes:A}:{}}).pipe((0,h.U)(T=>o.formatDates(T))))}static#t=this.\u0275fac=function(l){return new(l||o)(m.LFG(f.eN))};static#e=this.\u0275prov=m.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},9649:(w,M,a)=>{a.d(M,{C:()=>L});var p=a(3905),h=a(4004),D=a(2340),m=a(2027),f=a(1571),s=a(529);let L=(()=>{class v{constructor(n){this.http=n,this.serverUrl=D.N.apiServer,this.v2serverUrl=D.N.v2apiServer}convertDob(n){return{...n,...n.dob?{dateOfBirth:new m.p({values:{year:n.dob?.year,month:n.dob?.month,day:n.dob?.day}})}:{}}}convertToDto(n,i){const l=new Date(n.dobDate);return{givenName:n.firstNames,lastName:n.lastNames,languages:n.languages,nationality:n.nationality,mobility:n.mobility,dobDay:l.getDate(),dobMonth:l.getMonth()+1,dobYear:l.getFullYear(),...i?.email?{email:i?.email}:{},...i?.role?{role:i?.role}:{}}}findTalentsFilterSearch(n,i,l,u,A,T,R,S,b,t){const F={params:{count:n,page:i}};let x={...S?{area:S}:{},...b?{department:b}:{},...t?{name:t}:{}},g={...T?{country:T}:{},...R?{name:R}:{}},V={...u?{cycleId:u}:{},...A?{mapPlacement:A}:{}};const y={...l?{searchTerm:l}:{},...Object.keys(x).length?{positionFilter:x}:{},...Object.keys(g).length?{propertyFilter:g}:{},...Object.keys(V).length?{reviewFilter:V}:{}};return(0,p.z)(this.http.post(this.v2serverUrl+"talent-finder",y,F).pipe(U=>U))}downloadTalentsFilterSearch(n,i,l,u,A,T,R,S){let b={...T?{area:T}:{},...R?{department:R}:{},...S?{name:S}:{}},t={...u?{country:u}:{},...A?{name:A}:{}},F={...i?{cycleId:i}:{},...l?{mapPlacement:l}:{}};const x={...n?{searchTerm:n}:{},...Object.keys(b).length?{positionFilter:b}:{},...Object.keys(t).length?{propertyFilter:t}:{},...Object.keys(F).length?{reviewFilter:F}:{}},g=document.createElement("form"),V=this.v2serverUrl+"talent-finder/download";g.method="POST",g.action=V,Object.entries(x).forEach(y=>{if(null==y[1])return;const U=document.createElement("input");U.type="hidden",U.name=y[0],U.setAttribute("value",JSON.stringify(y[1])),g.appendChild(U)}),document.body.appendChild(g),g.submit(),setTimeout(()=>document.body.removeChild(g),200)}checkEmailAvailability(n){return(0,p.z)(this.http.get(this.v2serverUrl+"talent/email/"+n).pipe(i=>i))}getTalent(n){return(0,p.z)(this.http.get(this.v2serverUrl+"talent/"+n).pipe((0,h.U)(i=>({talent:this.convertDob(i)}))))}createTalent(n,i){return(0,p.z)(this.http.post(this.v2serverUrl+"talent",this.convertToDto(n,i)).pipe((0,h.U)(l=>({talent:this.convertDob(l)}))))}createTalentAccount(n,i){return(0,p.z)(this.http.post(this.v2serverUrl+"talent/"+n+"/account",i).pipe((0,h.U)(l=>({talent:this.convertDob(l)}))))}createLegacyWorkInfo(n,i){return(0,p.z)(this.http.put(this.v2serverUrl+"talent/legacy-work/"+n,i).pipe((0,h.U)(l=>({talent:this.convertDob(l)}))))}getTalentByAccount(n){return(0,p.z)(this.http.get(this.v2serverUrl+"talent/account/"+n).pipe((0,h.U)(i=>({talent:this.convertDob(i)}))))}editTalent(n,i){return(0,p.z)(this.http.put(this.v2serverUrl+"talent/"+n,this.convertToDto(i)).pipe((0,h.U)(l=>({talent:this.convertDob(l)}))))}revokeTalentsAccount(n){return(0,p.z)(this.http.put(this.v2serverUrl+"talent/revoke-access/"+n,{}).pipe((0,h.U)(i=>({talent:this.convertDob(i)}))))}getSupportedCountries(){return(0,p.z)(this.http.get(this.v2serverUrl+"talent/countries/").pipe((0,h.U)(n=>({countries:n}))))}getSupportedLanguages(){return(0,p.z)(this.http.get(this.v2serverUrl+"talent/languages/").pipe((0,h.U)(n=>({languages:n}))))}static#t=this.\u0275fac=function(i){return new(i||v)(f.LFG(s.eN))};static#e=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},4053:(w,M,a)=>{a.d(M,{U:()=>L});var p=a(3905),h=a(4004),D=a(2340),m=a(9147),f=a(1571),s=a(529);let L=(()=>{class v{constructor(n){this.http=n,this.serverUrl=D.N.v2apiServer}getTeamByLeader(n){return(0,p.z)(this.http.get(this.serverUrl+"team/"+n).pipe((0,h.U)(i=>({...i,...i.employment?{employment:m.Ib.formatDates(i.employment)}:{},teamMembers:i.teamMembers.map(l=>({...l,...l.employment?{employment:m.Ib.formatDates(l.employment)}:{}}))}))))}getRelevantJobByTalent(n){return(0,p.z)(this.http.get(this.serverUrl+"team/relevant-job/"+n).pipe((0,h.U)(i=>i)))}getTopMostJobInHierarchy(){return(0,p.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,h.U)(n=>n)))}addJobEmployment(n,i,l,u){return(0,p.z)(this.http.post(this.serverUrl+"team/new-job-employment",{title:void 0,property:n,position:i,talent:l,from:u}).pipe((0,h.U)(A=>A)))}addEndedEmployment(n,i,l,u,A,T,R){return(0,p.z)(this.http.post(this.serverUrl+"team/ended-employment",{title:void 0,leaderJob:void 0,property:n,position:i,talent:l,status:u,from:A,until:T,...R?{notes:R}:{}}).pipe((0,h.U)(S=>S)))}addJob(n,i,l){return(0,p.z)(this.http.post(this.serverUrl+"job/",{leader:n,property:i,position:l}).pipe((0,h.U)(u=>u)))}removeJob(n){return(0,p.z)(this.http.delete(this.serverUrl+"job/"+n).pipe((0,h.U)(i=>i)))}getOwnActiveResponsibiliy(){return(0,p.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,h.U)(n=>n)))}static#t=this.\u0275fac=function(i){return new(i||v)(f.LFG(s.eN))};static#e=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},5357:(w,M,a)=>{a.r(M),a.d(M,{TalentFinderModule:()=>pt});var p=a(6895),h=a(433),D=a(2714),m=a(5593),f=a(420),s=a(2320),L=a(7064),v=a(5861),o=a(727),n=a(7579),i=a(3905),l=a(4004),u=a(8372),A=a(5653),T=a(9766),R=a(2338),S=a(625),b=a(826),t=a(1571),F=a(171),x=a(1831),g=a(1505),V=a(4053),y=a(9649),U=a(797),B=a(917),H=a(4954),z=a(8254),j=a(4829),J=a(805),Z=a(3608),W=a(1740);const G=["searchInput"];function Q(r,O){if(1&r){const e=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.addReview())}),t._UZ(2,"i",20),t._uU(3),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.selectedRows.length),t.xp6(2),t.hij(" Review selected (",e.selectedRows.length,") ")}}function K(r,O){1&r&&(t.TgZ(0,"th"),t._UZ(1,"p-tableHeaderCheckbox"),t.qZA())}function $(r,O){if(1&r&&(t.TgZ(0,"tr"),t.YNc(1,K,2,0,"th",15),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Property"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Position"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Department"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Area"),t.qZA(),t._UZ(12,"th"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.currentRWExists)}}function X(r,O){if(1&r&&t._UZ(0,"p-tableCheckbox",23),2&r){const e=t.oxw(2).$implicit;t.Q6J("value",e)}}function k(r,O){if(1&r&&(t.TgZ(0,"td"),t.YNc(1,X,1,1,"p-tableCheckbox",22),t.qZA()),2&r){const e=t.oxw().$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngIf",c.canSelectTalent(e))}}const q=function(r){return["..","view",r]};function tt(r,O){if(1&r&&t._UZ(0,"a",24),2&r){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,q,e.talentId))}}function et(r,O){if(1&r&&(t.TgZ(0,"tr"),t.YNc(1,k,2,1,"td",15),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.YNc(13,tt,1,3,"a",21),t.qZA()()),2&r){const e=O.$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngIf",c.currentRWExists),t.xp6(2),t.AsE("",(null==e.talentName?null:e.talentName.given)||""," ",(null==e.talentName?null:e.talentName.last)||"",""),t.xp6(2),t.Oqu(e.property||""),t.xp6(2),t.Oqu(e.position||""),t.xp6(2),t.Oqu(e.department||""),t.xp6(2),t.Oqu(e.area||""),t.xp6(2),t.Q6J("ngIf",c.canViewTalent(e))}}function it(r,O){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("(",e.selectedRows.length," selected)")}}function nt(r,O){if(1&r&&(t.TgZ(0,"small"),t._uU(1),t.YNc(2,it,2,1,"span",15),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("",e.total," total "),t.xp6(1),t.Q6J("ngIf",e.selectedRows.length)}}function rt(r,O){if(1&r){const e=t.EpF();t.TgZ(0,"p-button",26),t.NdJ("click",function(){t.CHM(e);const d=t.oxw(2);return t.KtG(d.streamExcelFile())}),t.qZA()}}function at(r,O){1&r&&t.YNc(0,rt,1,0,"ng-template",25)}function ot(r,O){if(1&r){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.addReview())}),t._UZ(1,"i",20),t._uU(2),t.qZA()}if(2&r){const e=t.oxw();t.xp6(2),t.hij(" Review selected (",e.selectedRows.length,") ")}}function st(r,O){1&r&&(t.TgZ(0,"p",28)(1,"strong"),t._uU(2,"Please note:"),t.qZA(),t._uU(3," Talents can only be selected if they don't have a review yet. To update a review, please contact your Keiro administrator."),t.qZA())}const lt=function(){return[10,25,50]};var E=(()=>{return(r=E||(E={}))[r.REVIEW_CYCLE=0]="REVIEW_CYCLE",r[r.MAP_POSITION=1]="MAP_POSITION",r[r.COUNTRY=2]="COUNTRY",r[r.PROPERTY=3]="PROPERTY",r[r.AREA=4]="AREA",r[r.DEPARTMENT=5]="DEPARTMENT",r[r.POSITION=6]="POSITION",E;var r})();let ht=(()=>{class r{constructor(e,c,d,_,I,C,Y,N,ut,Et,Tt,_t){this.filterService=e,this.route=c,this.router=d,this.authStateService=_,this.store=I,this.talentService=C,this.teamService=Y,this.talentsManagementApi=N,this.locationsApi=ut,this.positionsApi=Et,this.reviewCycleServiceApi=Tt,this.talentMapBoxesApi=_t,this.canDownloadExcel=!1,this.total=0,this.page=0,this.step=25,this.rows=[],this.selectedRows=[],this.searchInputControl=new h.p4,this.loadingIndicator=!0,this.subscriptions=new o.w0,this.filterValue={},this.callTalentFinderSubject=new n.x,this.isRowSelectable=P=>this.canSelectTalent(P.data),this.subscriptions.add(this.callTalentFinderSubject.pipe((0,l.U)(P=>(this.loadingIndicator=!0,P)),(0,u.b)(150)).subscribe(()=>this.fetchTalentsWithSearch())),this.fetchLocations(),this.fetchPositions(),this.fetchCurrentReviewCycle(),this.fetchReviewWindows(),this.fetchTalentMapPositions(),this.fetchActiveResponsiblity(),this.subscriptions.add(this.authStateService.authState.subscribe(P=>{P.identity&&(this.currentUser=P.identity),this.canDownloadExcel=this.currentUser?.role==S.u.SUPER_ADMIN||this.currentUser?.role==S.u.ADMIN})),this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,u.b)(250)).subscribe(P=>{this.searchInputControl.valid&&(this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{q:encodeURIComponent(P)},queryParamsHandling:"merge",replaceUrl:!0}))}))}ngOnInit(){(0,i.z)(this.route.queryParams).then(e=>{if(e.f){const c=R.F.decodeURLParamToObject(e.f);this.filterService.addFilterValues(c)}if(e.q){const c=decodeURIComponent(e.q);this.searchInputControl.setValue(c)}}),this.filterService.valueChange.subscribe(e=>{const c=this.filterValue;this.filterValue=e,this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{f:R.F.encodeObjectToURLParam(e)},queryParamsHandling:"merge",replaceUrl:!0}),(this.filterValue.country!=c.country||this.filterValue.location!=c.location)&&this.fetchLocations(),(this.filterValue.area!=c.area||this.filterValue.department!=c.department||this.filterValue.position!=c.position)&&this.fetchPositions()})}ngAfterViewInit(){this.input?.nativeElement.focus()}ngOnDestroy(){this.subscriptions.unsubscribe()}streamExcelFile(){this.talentsManagementApi.downloadTalentsFilterSearch(this.searchInputControl?.value,this.filterValue?.windowRId,this.filterValue?.boxPosition,this.filterValue?.country,this.filterValue?.location,this.filterValue?.area,this.filterValue?.department,this.filterValue?.position)}onSelectionChange(e){this.selectedRows=e}setPage(e){this.step=e.rows,this.page=Math.floor(e.first/e.rows),this.callTalentFinderSubject.next(void 0)}canSelectTalent(e){let c=this.currentUserResponsibility?.activeJob?this.currentUserResponsibility?.activeJob.property._id:this.currentUser?.talent?.location;return!(!this.currentRWExists||this.currentReviewCycle?._id&&e.reviewedDuringCycles?.includes(this.currentReviewCycle._id)||this.currentUser?.role===S.u.EMPLOYEE&&this.currentUser?.id===e.talentId||(this.currentUser?.role===S.u.EMPLOYEE||this.currentUser?.role===S.u.MANAGER)&&c!==e.propertyId)}canViewTalent(e){return!0}onSelect(e){const c=e.selected;this.selectedRows.splice(0,this.selectedRows.length),this.selectedRows.push(...c)}addReview(){this.store.dispatch((0,b.KD)({talents:this.selectedRows})),this.router.navigate(["app","review","create"])}fetchTalentsWithSearch(){this.loadingIndicator=!0,this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl?.value,this.filterValue?.windowRId,this.filterValue?.boxPosition,this.filterValue?.country,this.filterValue?.location,this.filterValue?.area,this.filterValue?.department,this.filterValue?.position).then(e=>{this.rows=e.talents,this.total=e.total}).finally(()=>{this.loadingIndicator=!1})}fetchLocations(){this.locationsApi.findDistinctLocations(this.filterValue.country||void 0,this.filterValue.location||void 0).then(e=>{const c=this.filterService.getMetadataWithId(E.COUNTRY.toString()),d=e.countries.map(C=>({name:C,value:C}));c.options=d;const _=this.filterService.getMetadataWithId(E.PROPERTY.toString()),I=e.properties.map(C=>({name:C,value:C}));_.options=I}).catch(e=>{console.error(e)})}fetchPositions(){this.positionsApi.findDistinctPositions(this.filterValue.area||void 0,this.filterValue.department||void 0,this.filterValue.position||void 0).then(e=>{const c=this.filterService.getMetadataWithId(E.AREA.toString()),d=e.areas.map(N=>({name:N,value:N}));c.options=d;const _=this.filterService.getMetadataWithId(E.DEPARTMENT.toString()),I=e.departments.map(N=>({name:N,value:N}));_.options=I;const C=this.filterService.getMetadataWithId(E.POSITION.toString()),Y=e.positions.map(N=>({name:N,value:N}));C.options=Y}).catch(e=>{console.error(e)})}fetchReviewWindows(){this.reviewCycleServiceApi.getAllReviewCycles().then(e=>{const c=this.filterService.getMetadataWithId(E.REVIEW_CYCLE.toString()),d=e.reviewCycles.sort((_,I)=>Date.parse(I.startDate)-Date.parse(_.startDate)).map(_=>({name:_.name,value:_._id}));c.options=d,!this.filterValue.windowRId&&c?.required&&this.filterService.addFilterWithId(E.REVIEW_CYCLE.toString(),d[0]?.value)}).catch(e=>{console.error(e)})}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(e=>{this.currentReviewCycle=e.reviewCycle?e.reviewCycle:void 0,this.currentRWExists=void 0!==this.currentReviewCycle}).catch(e=>{console.error(e)})}fetchTalentMapPositions(){this.talentMapBoxesApi.getBoxes().then(e=>{const c=this.filterService.getMetadataWithId(E.MAP_POSITION.toString()),d=e.boxes.sort((_,I)=>_.title[_.title.length-1]-I.title[I.title.length-1]).map(_=>({name:_.title,value:""+_.pos}));c.options=d}).catch(e=>{console.error(e)})}fetchActiveResponsiblity(){var e=this;return(0,v.Z)(function*(){e.currentUserResponsibility=yield e.teamService.getOwnActiveResponsibiliy()})()}static#t=this.\u0275fac=function(c){return new(c||r)(t.Y36(A.i),t.Y36(D.gz),t.Y36(D.F0),t.Y36(F.V),t.Y36(x.yh),t.Y36(g.C),t.Y36(V.U),t.Y36(y.C),t.Y36(U._),t.Y36(B.m),t.Y36(H.m),t.Y36(z.M))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-talent-finder"]],viewQuery:function(c,d){if(1&c&&t.Gf(G,5),2&c){let _;t.iGM(_=t.CRH())&&(d.input=_.first)}},features:[t._Bn([{provide:"filterConfiguration",useValue:{dropdownOptions:[{id:E.COUNTRY.toString(),name:"Country"},{id:E.PROPERTY.toString(),name:"Property"},{id:E.AREA.toString(),name:"Area"},{id:E.DEPARTMENT.toString(),name:"Department"},{id:E.POSITION.toString(),name:"Position"},{id:E.REVIEW_CYCLE.toString(),name:"Review cycle"},{id:E.MAP_POSITION.toString(),name:"Talent Map placement"}],filtersMetadata:[{id:E.REVIEW_CYCLE.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Review Cycle",key:"windowRId",group:"Evaluation",children:[{id:E.MAP_POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Talent Map Placement",key:"boxPosition",group:"Evaluation"}]},{id:E.AREA.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Area",key:"area",group:"Job description",groupOrder:1},{id:E.DEPARTMENT.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Department",key:"department",group:"Job description",groupOrder:2},{id:E.POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Position",key:"position",group:"Job description",groupOrder:3},{id:E.COUNTRY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Country",key:"country",group:"Location",groupOrder:1},{id:E.PROPERTY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Property",key:"location",group:"Location",groupOrder:2}]}},{provide:A.i}])],decls:20,vars:17,consts:[[1,"animated","fadeIn"],[1,"card","content-section-card"],[1,"card-body"],[1,"form-row","justify-content-end"],[1,"col","mb-1","p-fluid"],[1,"p-input-icon-left"],[1,"fa","fa-search"],["type","text","pInputText","","placeholder","Search by name, email, or Keiro ID",3,"formControl"],["searchInput",""],["class","col-12 col-sm-auto text-right mb-1",4,"ngIf"],[1,"d-block","mb-2",3,"service"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","selection","selectionPageOnly","rowSelectable","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],[4,"ngIf"],["class","btn btn-primary","title","Select some talents to add reviews",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-sm-auto","text-right","mb-1"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-chart-line","mr-1"],["pButton","","class","p-button-rounded p-button-secondary","icon","fa fa-external-link-alt",3,"routerLink",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],["pButton","","icon","fa fa-external-link-alt",1,"p-button-rounded","p-button-secondary",3,"routerLink"],["pTemplate","paginatorright"],["icon","fa fa-file-excel","styleClass","p-button-outlined","type","button","pTooltip","Download as Excel file","tooltipPosition","left",3,"click"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"click"],[1,"mt-2"]],template:function(c,d){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Talent Finder"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"span",5),t._UZ(8,"i",6)(9,"input",7,8),t.qZA()(),t.YNc(11,Q,4,2,"div",9),t.qZA(),t._UZ(12,"alasta-filters-list",10),t.TgZ(13,"p-table",11),t.NdJ("onLazyLoad",function(I){return d.setPage(I)})("selectionChange",function(I){return d.onSelectionChange(I)}),t.YNc(14,$,13,1,"ng-template",12),t.YNc(15,et,14,8,"ng-template",13),t.YNc(16,nt,3,2,"ng-template",14),t.YNc(17,at,1,0,null,15),t.qZA(),t.YNc(18,ot,3,1,"button",16),t.YNc(19,st,4,0,"p",17),t.qZA()()()),2&c&&(t.xp6(9),t.Q6J("formControl",d.searchInputControl),t.xp6(2),t.Q6J("ngIf",d.currentRWExists&&d.selectedRows.length),t.xp6(1),t.Q6J("service",d.filterService),t.xp6(1),t.Q6J("value",d.rows)("lazy",!0)("loading",d.loadingIndicator)("paginator",!0)("rows",d.step)("totalRecords",d.total)("rowsPerPageOptions",t.DdM(16,lt))("selection",d.selectedRows)("selectionPageOnly",!0)("rowSelectable",d.isRowSelectable),t.xp6(4),t.Q6J("ngIf",d.canDownloadExcel),t.xp6(1),t.Q6J("ngIf",d.currentRWExists&&d.selectedRows.length),t.xp6(1),t.Q6J("ngIf",d.currentRWExists))},dependencies:[D.rH,p.O5,h.Fj,h.JJ,h.oH,j.a,f.iA,J.jx,f.UA,f.Mo,m.Hq,m.zx,Z.u,W.o]})}return r})(),pt=(()=>{class r{static#t=this.\u0275fac=function(c){return new(c||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[D.Bz.forChild([{path:"",component:ht}]),p.ez,h.UX,s.z8.forRoot(),L.i,f.U$,m.hJ,Z.z,W.j]})}return r})()}}]);